<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=7,IE=9">
  <meta charset="utf-8">
<link rel="shortcut icon" href="http://www.lib.purdue.edu/sites/all/themes/cssredux/favicon.ico" type="image/vnd.microsoft.icon">
<meta content="GIS Services" about="/gis" property="dc:title">
<link rel="canonical" href="http://www.lib.purdue.edu/gis">
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
<link rel="shortlink" href="http://www.lib.purdue.edu/node/66">

<!-- add by Yue-->
 <link rel="stylesheet" href="http://js.arcgis.com/3.7/js/dojo/dijit/themes/claro/claro.css">  
 <link rel="stylesheet" href="http://js.arcgis.com/3.7/js/dojo/dijit/themes/nihilo/nihilo.css"> 
 <link rel="stylesheet" href="http://js.arcgis.com/3.7/js/esri/css/esri.css">
 <script src="http://js.arcgis.com/3.7/"></script>

  <title>Indiana FloodMap | Purdue Libraries</title>

      <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="cleartype" content="on">

<style>@import url("http://www.lib.purdue.edu/modules/aggregator/aggregator.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/date/date_api/date.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/date/date_popup/themes/datepicker.1.7.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/date/date_repeat_field/date_repeat_field.css?muifpk");
@import url("http://www.lib.purdue.edu/modules/field/theme/field.css?muifpk");
@import url("http://www.lib.purdue.edu/modules/node/node.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/office_hours/office_hours.css?muifpk");
@import url("http://www.lib.purdue.edu/modules/search/search.css?muifpk");
@import url("http://www.lib.purdue.edu/modules/user/user.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/views/css/views.css?muifpk");</style>
<style>@import url("http://www.lib.purdue.edu/sites/all/modules/ctools/css/ctools.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/panels/css/panels.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/views_slideshow/views_slideshow.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/menu_minipanels/css/menu_minipanels.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/modules/panels/plugins/layouts/twocol/twocol.css?muifpk");</style>
<style>@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/assets/css/normalize.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/css/fixed-width.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/assets/css/bootstrap-purdue.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/assets/css/site.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/css/drupal.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/css/jqueryUI/jquery.ui.all.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/css/tabs.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/css/nodes.css?muifpk");
@import url("http://www.lib.purdue.edu/sites/all/themes/cssredux/css/print.css?muifpk");</style>


<script>
	var map;
	var floodmap;
	var ovgraphic;
	var dynamicfloodmap;
      require([
        "esri/map",
		"esri/layers/ArcGISDynamicMapServiceLayer",
        "esri/layers/ImageParameters",
		"esri/layers/ArcGISTiledMapServiceLayer",
		"esri/dijit/BasemapGallery",
		"esri/arcgis/utils", 
		"dojo/parser", 
		"dijit/layout/BorderContainer", 
		"dijit/layout/ContentPane", 
		"dijit/TitlePane",
		"dojo/domReady!"
		], function(Map , ArcGISDynamicMapServiceLayer, ImageParameters, Tiled, BasemapGallery, arcgisUtils, parser) {   

        parser.parse();

        map = new Map("map", {
          basemap: "hybrid",
          center: [-86, 40],
          zoom: 7,
		  logo:false,
		  showAttribution:false
        });

		// add flood map
		
		var imageParameters = new ImageParameters();
        imageParameters.format = "png24"; //set the image type to PNG24,

        //Takes a URL to a non cached map service.
        ecoregion = new ArcGISDynamicMapServiceLayer("http://maps.lib.purdue.edu:6080/arcgis/rest/services/ecoregion/MapServer", {
          opacity: 0,
          "imageParameters": imageParameters
        });
        map.addLayer(ecoregion);
		FNR_Property = new ArcGISDynamicMapServiceLayer("http://maps.lib.purdue.edu:6080/arcgis/rest/services/Purdue/FNR_Property/MapServer", {
          opacity: 1,
        });
        map.addLayer(FNR_Property);
		hillshade = new Tiled("http://mapsdev.lib.purdue.edu:6080/arcgis/rest/services/Purdue/Isee_1_0_HillShade_PNG8/MapServer", {opacity:0.5});
		map.addLayer(hillshade);
		pm = new Tiled("http://mapsdev.lib.purdue.edu:6080/arcgis/rest/services/Purdue/Isee_1_0_pm_1layerPNG8/MapServer", {opacity:0.5});
		map.addLayer(pm);
		
		//add the basemap gallery, in this case we'll display maps from ArcGIS.com including bing maps
        var basemapGallery = new BasemapGallery({
          showArcGISBasemaps: true,
          map: map
        }, "basemapGallery");
        basemapGallery.startup();
        
        basemapGallery.on("error", function(msg) {
          console.log("basemap gallery error:  ", msg);
        });
		dojo.connect(map, "onLoad", initFunctionality);
		
		overviewMap = new esri.Map("overview", { slider: false, nav: false,logo:false,
		  showAttribution:false,
		  center: [-86, 40],
          extent: new esri.geometry.Extent({xmin:-9813999.351583587,ymin:4404930.817577897,xmax:-9427447.431488799,ymax:5108257.068504248,spatialReference:{wkid:102100}})});
		overbasemap = new esri.layers.ArcGISDynamicMapServiceLayer("http://mapsdev.lib.purdue.edu:6080/arcgis/rest/services/IN_county/MapServer");
		overviewMap.addLayer(overbasemap);
		dojo.connect(overviewMap,"onLoad", initOverview);
		
				       
      });
	  
	  require([
			"dojo/dom", "dojo/parser", "dijit/form/HorizontalSlider"
		], function(dom, parser, HorizontalSlider){

	
			var slider = new HorizontalSlider({
				name: "slider",
				value: 0,
				minimum: 0,
				maximum: 1,
				intermediateChanges: true,
				style: "width:300px;height:10px;",
				onChange: function(value){
					ecoregion.setOpacity(value);
				}
			}, "slider");
			var slider1 = new HorizontalSlider({
				name: "slider1",
				value: 0.5,
				minimum: 0,
				maximum: 1,
				intermediateChanges: true,
				style: "width:300px;height:10px;",
				onChange: function(value){
					pm.setOpacity(value);
				}
			}, "slider1");
			var slider = new HorizontalSlider({
				name: "slider2",
				value: 0.5,
				minimum: 0,
				maximum: 1,
				intermediateChanges: true,
				style: "width:300px;height:10px;",
				onChange: function(value){
					hillshade.setOpacity(value);
				}
			}, "slider2");
		});
		
		function initFunctionality(map) {
				
		dojo.connect(map, "onExtentChange", function(extent, point, levelchange, lod) {
             try{   
				if (ovgraphic == null) {
                    var symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_NULL, new esri.symbol.SimpleLineSymbol("solid", new dojo.Color([255, 0, 0]), 1), new dojo.Color([255, 255, 0]));
                    var ovextentg = map.extent.intersects(overviewMap.extent.expand(0.99));
                    ovgraphic = new esri.Graphic(ovextentg, symbol);
                    overviewMap.graphics.add(ovgraphic);
                }
                else {
                    ovgraphic.setGeometry(extent.intersects(overviewMap.extent.expand(0.99)));
                    
                }
				if(lod.level>15)
				{
					map.addLayer(dynamicfloodmap);
				}
				else
				{
					map.removeLayer(dynamicfloodmap);
				}
				}
               			
				catch (err)
				{
				}

            });
			}
		function initOverview() {
            overviewMap.disablePan();
            overviewMap.disableScrollWheelZoom();
            overviewMap.disableClickRecenter();
            overviewMap.disableDoubleClickZoom();
            overviewMap.disableShiftDoubleClickZoom();
            overviewMap.disableKeyboardNavigation();

        }
	  function setbasemap(base){
			switch(base.id)
			{
			case "galleryNode_basemap_8":
				map.setBasemap("satellite");
				break;
			case "galleryNode_basemap_7":
				map.setBasemap("hybrid");
				break;
			case "galleryNode_basemap_6":
				map.setBasemap("streets");
				break;
			case "galleryNode_basemap_5":
				map.setBasemap("topo");
				break;
			case "galleryNode_basemap_4":
				map.setBasemap("gray");
				break;
			}
			dijit.byId('titlepane').attr('open', false);
			
		}

		
		
</script> 
<!-- 
      <!--[if lt IE 9]>
    <script src="/sites/all/themes/zen/js/html5-respond.js"></script>
    <![endif]-->
  <style type="text/css" charset="utf-8">/* See license.txt for terms of usage */
.likeabutton {
    text-decoration: none; font: menu;
    display: inline-block; padding: 2px 8px;
    background: ButtonFace; color: ButtonText;
    border-style: solid; border-width: 2px;
    border-color: ButtonHighlight ButtonShadow ButtonShadow ButtonHighlight;
}
.likeabutton:active {
    border-color: ButtonShadow ButtonHighlight ButtonHighlight ButtonShadow;
}
</style> 
</head>

<body class="claro html not-front not-logged-in no-sidebars page-node page-node- page-node-66 node-type-page section-gis">
      <p id="skip-link">
    </p>
      <div>
      		<header id="header" role="banner">
			<div id="purdueLogo">
				<a href="http://www.purdue.edu/">
					<img src="template_files/purdueLogo.png" title="Purdue University Homepage" alt="Purdue University" height="64" width="202">
				</a>
			</div>
			<div id="librariesLogo">
				<a href="http://www.lib.purdue.edu/">
					<img src="template_files/libraries.png" title="Libraries Homepage" alt="Purdue Libraries" height="30" width="264">
				</a>
			</div>
            <div style="float:right; margin-right:60; margin-top:30px; font-family: Impact; font-size: x-large;"> 
                <dl>
                    <dd>
                        <h4>
                            GIS Services</h4>
                    </dd>
                </dl>
        </div>

		</header>

        </div>
	<div style="width:100%; display:block;">
	  <div data-dojo-type="dijit/layout/BorderContainer" 
         data-dojo-props="design:'headline', gutters:false" 
		 class="claro html not-front not-logged-in no-sidebars page-node page-node- page-node-66 node-type-page section-gis nihilo"
         style="border-style: ridge; border-width: medium; border-color: inherit; float:left; margin-left:10%; width:55%; height:700px;">
	
      <div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" style="height:100%; width:100%">
	  </div>
	  <div style="position:absolute; right:20px; top:10px; z-Index:999; border-color: white; border-style: ridge; border-width: medium;">
          <div id="titlepane" data-dojo-type="dijit/TitlePane" data-dojo-props="title:'Switch Basemap', closable:false,  open:false">
            <div data-dojo-type="dijit/layout/ContentPane" style="width:380px; height:280px; overflow:auto;">
			<div id="galleryNode_basemap_8" class="esriBasemapGalleryNode esriBasemapGallerySelectedNode" onClick="setbasemap(this);"  >
			<a href="javascript:void(0);">
			<img class="esriBasemapGalleryThumbnail" src="http://www.arcgis.com/sharing/rest/content/items/86de95d4e0244cba80f0fa2c9403a7b2/info/thumbnail/tempimagery.jpg">
			</a>
			<div class="esriBasemapGalleryLabelContainer">
			<span alt="Imagery" title="Imagery">Imagery</span>
			</div>
			</div>
			<div id="galleryNode_basemap_7" class="esriBasemapGalleryNode" onClick="setbasemap(this);">
			<a href="javascript:void(0);">
			<img class="esriBasemapGalleryThumbnail" src="http://www.arcgis.com/sharing/rest/content/items/413fd05bbd7342f5991d5ec96f4f8b18/info/thumbnail/tempimagery_with_labels_ne_usa.png">
			</a>
			<div class="esriBasemapGalleryLabelContainer">
			<span alt="Imagery with Labels" title="Imagery with Labels">Imagery with Labels</span>
			</div>
			</div>
			<div id="galleryNode_basemap_6" class="esriBasemapGalleryNode" onClick="setbasemap(this);">
			<a href="javascript:void(0);">
			<img class="esriBasemapGalleryThumbnail" src="http://www.arcgis.com/sharing/rest/content/items/d8855ee4d3d74413babfb0f41203b168/info/thumbnail/tempstreets.jpg">
			</a>
			<div class="esriBasemapGalleryLabelContainer">
			<span alt="Streets" title="Streets">Streets</span>
			</div>
			</div>
			<div id="galleryNode_basemap_5" class="esriBasemapGalleryNode" onClick="setbasemap(this);">
			<a href="javascript:void(0);">
			<img class="esriBasemapGalleryThumbnail" src="http://www.arcgis.com/sharing/rest/content/items/6e03e8c26aad4b9c92a87c1063ddb0e3/info/thumbnail/topo_map_2.jpg">
			</a>
			<div class="esriBasemapGalleryLabelContainer">
			<span alt="Topographic" title="Topographic">Topographic</span>
			</div>
			</div>
			<div id="galleryNode_basemap_4" class="esriBasemapGalleryNode" onClick="setbasemap(this);">
			<a href="javascript:void(0);">
			<img class="esriBasemapGalleryThumbnail" src="http://www.arcgis.com/sharing/rest/content/items/8b3b470883a744aeb60e5fff0a319ce7/info/thumbnail/templight_gray_canvas_with_labels__ne_usa.png">
			</a>
			<div class="esriBasemapGalleryLabelContainer">
			<span alt="Gray Canvas" title="Gray Canvas">Gray Canvas</span>
			</div>
			</div>

</div>
          </div>
        </div>
	  
    </div>

		    

        <div style="float:left; margin-left:30px; width:20%">
        <div id="overview" style="border: thin solid #000000; height:280px;"></div>
		<div style="font-family: Arial, Helvetica, sans-serif; color: #494949; font-size: 16px; margin-top:30px;">Dominant parent material layer opacity: </div>
		<div id="slider1"></div>
		<div style="font-family: Arial, Helvetica, sans-serif; color: #494949; font-size: 16px; margin-top:30px;">Hillshade layer opacity: </div>
		<div id="slider2"></div>
		<div style="font-family: Arial, Helvetica, sans-serif; color: #494949; font-size: 16px; margin-top:30px;">Ecoregions</div>
		<div id="slider"></div>
       
		
		
        </div>
		</div>
		
</body></html>